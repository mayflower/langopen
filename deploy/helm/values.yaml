nameOverride: ""
fullnameOverride: ""

global:
  image:
    repository: ghcr.io/mayflower/langopen
    tag: latest
    pullPolicy: IfNotPresent
  imagePullSecrets: []
  envFromSecret: ""

env:
  postgresDsn: ""
  redisAddr: ""
  bootstrapApiKey: ""
  builderUrl: "http://langopen-builder"
  controlPlaneSyncAgentDeployment: true
  controlPlaneSyncAgentDeploymentStrict: false
  agentDeploymentNamespace: ""
  agentDeploymentImage: "ghcr.io/mayflower/langopen/agent-runtime:latest"
  openapiSpecPath: "/app/contracts/openapi/agent-server.json"
  migrationsDir: "/app/db/migrations"
  runWakeupList: "langopen:runs:wakeup"
  runCancelKeyPrefix: "langopen:run:cancel:"
  runCancelChannelPrefix: "langopen:run:cancel:ch:"
  runStreamChannelPrefix: "langopen:run:stream:"
  runStreamBufferPrefix: "langopen:run:events:"
  runStreamBufferTtlSeconds: 3600

apiServer:
  enabled: true
  replicas: 2
  runtimeClassName: gvisor
  autoMigrate: true
  service:
    type: ClusterIP
    port: 80
    targetPort: 8080
  ingress:
    enabled: false
    className: traefik
    annotations: {}
    hosts: []
    tls: []
  resources: {}

worker:
  enabled: true
  replicas: 2
  runtimeClassName: gvisor
  executor: runtime
  runtimeRunnerUrl: ""
  runMode: mode_a
  modeBAllowSimulatedSandbox: false
  sandboxEnabled: false
  sandboxNamespace: ""
  sandboxTemplateName: "langopen-default"
  metricsAddr: ":9091"
  resources: {}

runtimeRunner:
  enabled: true
  replicas: 1
  runtimeClassName: gvisor
  defaultPythonVersion: "3.11"
  supportedPythonVersions: "3.11,3.12,3.13"
  compatProfile: "langchain-community"
  enableCompatShims: true
  service:
    type: ClusterIP
    port: 80
    targetPort: 8083
  resources: {}

controlPlane:
  enabled: true
  replicas: 1
  runtimeClassName: gvisor
  service:
    type: ClusterIP
    port: 80
    targetPort: 8081
  resources: {}

builder:
  enabled: true
  replicas: 1
  runtimeClassName: gvisor
  executeJobs: false
  buildNamespace: ""
  service:
    type: ClusterIP
    port: 80
    targetPort: 8082
  resources: {}

operator:
  enabled: true
  replicas: 1
  resources: {}

portal:
  enabled: true
  replicas: 1
  runtimeClassName: gvisor
  service:
    type: ClusterIP
    port: 80
    targetPort: 3000
  ingress:
    enabled: false
    className: traefik
    annotations: {}
    hosts: []
    tls: []
  env:
    openauthIssuerUrl: ""
    openauthClientId: ""
    openauthRedirectUri: ""
    portalSessionSecret: ""
    platformDataApiBaseUrl: "http://langopen-api-server"
    platformControlApiBaseUrl: "http://langopen-control-plane"
    platformApiKey: ""
    grafanaBaseUrl: ""
    grafanaExploreUrl: ""
    grafanaTempoUrl: ""
    grafanaDashboardUrl: ""
  resources: {}

networkPolicy:
  enabled: true
  allowDns: true
  egressCidrs: []
  allowBackendEgress: true
  postgresNamespace: postgresql
  postgresPort: 5432
  postgresPodSelector:
    cluster-name: dbserver
    spilo-role: master
  redisNamespace: redis
  redisPort: 6379
  redisPodSelector:
    app.kubernetes.io/name: redis
    app.kubernetes.io/instance: redis
    app.kubernetes.io/component: master
  allowWorkerRuntimeRunnerEgress: true
  runtimeRunnerNamespace: langopen
  runtimeRunnerPort: 8083
  runtimeRunnerPodSelector:
    app.kubernetes.io/component: runtime-runner
    app.kubernetes.io/instance: langopen
    app.kubernetes.io/name: langopen
  allowHttpsEgressForRuntime: true
  runtimeEgressComponents:
    - runtime-runner
    - builder
  runtimeEgressPorts:
    - 443

extraEnv:
  apiServer: []
  worker: []
  runtimeRunner: []
  controlPlane: []
  builder: []
  operator: []
  portal: []

extraEnvFrom:
  apiServer: []
  worker: []
  runtimeRunner: []
  controlPlane: []
  builder: []
  operator: []
  portal: []

observability:
  dashboards:
    enabled: true
  alerts:
    enabled: false
